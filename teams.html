<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام إدارة البطولة - اختيار الفرق</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #0a0e17;
            color: white;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(0, 255, 0, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 75% 75%, rgba(255, 0, 0, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 50% 10%, rgba(255, 105, 180, 0.1) 0%, transparent 20%);
        }
        
        .container {
            background-color: rgba(10, 14, 23, 0.95);
            border: 2px solid #ff3399;
            border-radius: 15px;
            box-shadow: 0 0 25px rgba(255, 51, 153, 0.4);
            width: 95%;
            max-width: 1200px;
            padding: 30px;
            margin: 20px 0;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 51, 153, 0.3);
        }
        
        .header h2 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #00ff00;
            text-shadow: 0 2px 8px rgba(0, 255, 0, 0.6);
            background: linear-gradient(45deg, #00ff00, #00cc88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .back-btn {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            border: 1px solid #ff3399;
            padding: 12px 24px;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            box-shadow: 0 0 15px rgba(255, 51, 153, 0.4);
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .back-btn:hover {
            background: rgba(255, 51, 153, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(255, 51, 153, 0.6);
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            font-size: 1.2rem;
        }
        
        .stat-box {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #00ff00;
            padding: 18px 28px;
            border-radius: 12px;
            text-align: center;
            min-width: 160px;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .stat-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: #ff3399;
            text-shadow: 0 0 10px rgba(255, 51, 153, 0.5);
        }
        
        .selection-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 30px 0;
        }
        
        .input-group {
            margin-bottom: 20px;
            width: 100%;
            max-width: 500px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 10px;
            font-size: 1.1rem;
            color: #ff3399;
            font-weight: bold;
        }
        
        .input-group input {
            width: 100%;
            padding: 16px;
            border: 1px solid #00ff00;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            font-size: 1.1rem;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #ff3399;
            box-shadow: 0 0 20px rgba(255, 51, 153, 0.4);
        }
        
        .input-group input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .confirm-button {
            background: linear-gradient(135deg, #00ff00, #009900);
            color: #000;
            border: none;
            padding: 16px 45px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.6);
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .confirm-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(0, 255, 0, 0.8);
        }
        
        .confirm-button:disabled {
            background: linear-gradient(135deg, #444, #777);
            color: #999;
            cursor: not-allowed;
            transform: scale(1);
            box-shadow: none;
        }
        
        .result {
            text-align: center;
            padding: 30px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 15px;
            width: 100%;
            max-width: 550px;
            margin-bottom: 30px;
            border: 2px solid #ff3399;
            box-shadow: 0 0 20px rgba(255, 51, 153, 0.5);
            animation: fadeIn 0.5s ease;
            display: none;
        }
        
        .result h3 {
            font-size: 1.6rem;
            margin-bottom: 15px;
            color: #00ff00;
        }
        
        .selected-team {
            font-size: 2.4rem;
            font-weight: bold;
            color: white;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
            animation: pulse 1.5s infinite;
            padding: 15px;
            background: linear-gradient(135deg, rgba(0, 255, 0, 0.2), rgba(255, 51, 153, 0.2));
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px solid #ff3399;
        }
        
        .selected-by {
            font-size: 1.3rem;
            color: #00ff00;
            font-weight: bold;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .teams-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(210px, 1fr));
            gap: 18px;
            margin-top: 30px;
        }
        
        .team-card {
            background: linear-gradient(135deg, rgba(0, 255, 0, 0.1), rgba(0, 128, 0, 0.2));
            border-radius: 12px;
            padding: 18px;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid #00ff00;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.3);
            position: relative;
            min-height: 110px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            cursor: pointer;
            overflow: hidden;
        }
        
        .team-card::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, #00ff00, transparent, #00ff00);
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .team-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 25px rgba(0, 255, 0, 0.5);
        }
        
        .team-card:hover::before {
            opacity: 0.3;
        }
        
        .team-card.selected {
            background: linear-gradient(135deg, #00ff00, #009900);
            color: #000;
            font-weight: bold;
            border: 2px solid #ff3399;
            box-shadow: 0 0 25px rgba(0, 255, 0, 0.8);
        }
        
        .selector-name {
            position: absolute;
            bottom: 5px;
            left: 0;
            right: 0;
            font-size: 0.9rem;
            color: #000;
            font-weight: bold;
            background: rgba(255, 51, 153, 0.9);
            padding: 3px 6px;
            border-radius: 0 0 10px 10px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            display: none; /* مخفي عن المشاركين */
        }
        
        .control-button {
            background: rgba(0, 0, 0, 0.6);
            color: white;
            border: 1px solid #ff3399;
            padding: 14px 28px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 0 15px rgba(255, 51, 153, 0.4);
        }
        
        .control-button:hover {
            background: rgba(255, 51, 153, 0.3);
            box-shadow: 0 0 20px rgba(255, 51, 153, 0.6);
            transform: translateY(-2px);
        }
        
        .selections-list {
            margin-top: 40px;
            width: 100%;
        }
        
        .selections-list h3 {
            text-align: center;
            margin-bottom: 20px;
            color: #00ff00;
            text-shadow: 0 0 15px rgba(0, 255, 0, 0.6);
            font-size: 1.8rem;
        }
        
        .selections-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #ff3399;
            box-shadow: 0 0 20px rgba(255, 51, 153, 0.4);
        }
        
        .selections-table th, .selections-table td {
            padding: 16px;
            text-align: right;
            border-bottom: 1px solid rgba(255, 51, 153, 0.3);
        }
        
        .selections-table th {
            background: rgba(255, 51, 153, 0.3);
            color: #00ff00;
            font-size: 1.1rem;
        }
        
        .selections-table tr:last-child td {
            border-bottom: none;
        }
        
        .selections-table tr:hover {
            background: rgba(255, 51, 153, 0.1);
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            padding: 20px 0;
            border-top: 1px solid rgba(255, 51, 153, 0.3);
        }
        
        .instructions {
            background: rgba(0, 0, 0, 0.6);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            line-height: 1.7;
            border: 1px solid #00ff00;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.3);
        }
        
        .instructions h3 {
            color: #ff3399;
            margin-bottom: 15px;
            font-size: 1.4rem;
            text-align: center;
        }
        
        .instructions ol {
            padding-right: 25px;
        }
        
        .instructions li {
            margin-bottom: 10px;
            color: #ffffff; /* أبيض كما طلبت */
            font-size: 1.1rem;
        }
        
        @media (max-width: 768px) {
            .teams-container {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            }
            
            .header h2 {
                font-size: 2rem;
            }
            
            .stats {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .stat-box {
                width: 100%;
                max-width: 280px;
            }
            
            .selections-table {
                font-size: 0.9rem;
            }
            
            .selected-team {
                font-size: 2rem;
            }
            
            .back-btn {
                top: 15px;
                right: 15px;
                padding: 10px 18px;
                font-size: 0.9rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .control-button {
                width: 100%;
                max-width: 280px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn">
        <i class="fas fa-arrow-right"></i>
        العودة للرئيسية
    </a>

    <div class="container">
        <div class="header">
            <h2>اختيار الفريق</h2>
            <div class="stats">
                <div class="stat-box">
                    <div>الإجمالي</div>
                    <div class="stat-value" id="totalValue">32</div>
                </div>
                <div class="stat-box">
                    <div>تم الاختيار</div>
                    <div class="stat-value" id="pickedValue">0</div>
                </div>
                <div class="stat-box">
                    <div>المتبقي</div>
                    <div class="stat-value" id="availableValue">32</div>
                </div>
            </div>
        </div>
        
        <div class="instructions">
            <h3>كيفية الاستخدام:</h3>
            <ol>
                <li>أدخل اسمك في الحقل المخصص</li>
                <li>أدخل رقم هاتفك في الحقل المخصص</li>
                <li>اختر الفريق الذي تريده من قائمة الفرق بالأسفل</li>
                <li>اضغط على زر "تأكيد الاختيار" لحفظ اختيارك</li>
                <li>سيتم عرض الفريق المختار واسمك أسفله</li>
                <li>يمكن للجميع رؤية جميع الاختيارات في الجدول أدناه</li>
            </ol>
        </div>
        
        <div class="selection-area">
            <div class="input-group">
                <label for="userName">اسم المشترك:</label>
                <input type="text" id="userName" placeholder="أدخل اسمك هنا">
            </div>
            
            <div class="input-group">
                <label for="userPhone">رقم الهاتف:</label>
                <input type="tel" id="userPhone" placeholder="أدخل رقم هاتفك">
            </div>
            
            <button class="confirm-button" id="confirmButton" disabled>
                <i class="fas fa-check-circle"></i>
                تأكيد الاختيار
            </button>
            
            <div class="result" id="result">
                <h3>اختيارك:</h3>
                <div class="selected-team" id="selectedTeam">-</div>
                <div class="selected-by" id="selectedBy">-</div>
            </div>
        </div>
        
        <div class="teams-container" id="teamsContainer">
            <!-- سيتم ملء الفرق هنا بواسطة JavaScript -->
        </div>
        
        <div class="selections-list">
            <h3>قائمة الاختيارات</h3>
            <table class="selections-table">
                <thead>
                    <tr>
                        <th>اسم المشترك</th>
                        <th>رقم الهاتف</th>
                        <th>الفريق المختار</th>
                        <th>وقت الاختيار</th>
                    </tr>
                </thead>
                <tbody id="selectionsTableBody">
                    <!-- سيتم ملء الاختيارات هنا -->
                </tbody>
            </table>
        </div>
        
        <div class="controls">
            <button class="control-button" id="resetButton">
                <i class="fas fa-redo"></i>
                إعادة التعيين
            </button>
            <button class="control-button" id="exportButton">
                <i class="fas fa-download"></i>
                تصدير البيانات
            </button>
        </div>
        
        <footer>
            <p>نظام إدارة البطولة © 2023 | جميع الحقوق محفوظة</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const teamsContainer = document.getElementById('teamsContainer');
            const confirmButton = document.getElementById('confirmButton');
            const resetButton = document.getElementById('resetButton');
            const exportButton = document.getElementById('exportButton');
            const result = document.getElementById('result');
            const selectedTeam = document.getElementById('selectedTeam');
            const selectedBy = document.getElementById('selectedBy');
            const totalValue = document.getElementById('totalValue');
            const pickedValue = document.getElementById('pickedValue');
            const availableValue = document.getElementById('availableValue');
            const userNameInput = document.getElementById('userName');
            const userPhoneInput = document.getElementById('userPhone');
            const selectionsTableBody = document.getElementById('selectionsTableBody');
            
            // قائمة الفرق
            const teams = [
                "REAL MADRID", "ATLETICO MADRID", "FC BARCELONA", "VILLAREAL",
                "SEVILLA", "MAN UTD", "LIVERPOOL", "MANCITY", "TOTTENHAM",
                "NEWCASTLE UNITED", "ARSENAL", "CHELSEA", "AC MILAN", "INTER MILAN",
                "ROMA", "JUVENTUS", "NAPOLI", "BAYERN MUNCHEN", "LEVERKUSEN",
                "DORTMUND", "PSG", "MARSEILLE", "MONACO", "AL NASR", "AL HILAL",
                "SPORTING LISBON", "BENFICA", "AJAX", "PSV", "FLAMENGO",
                "RIVER PLATE", "NOTTINGHAM FOREST"
            ];
            
            let availableTeams = [...teams];
            let selectedTeams = [];
            let allSelections = [];
            let selectedTeamName = null;
            
            // عرض الفرق في الواجهة
            function displayTeams() {
                teamsContainer.innerHTML = '';
                teams.forEach(team => {
                    const teamCard = document.createElement('div');
                    teamCard.className = 'team-card';
                    teamCard.textContent = team;
                    teamCard.id = `team-${team.replace(/\s+/g, '-')}`;
                    teamCard.dataset.team = team;
                    
                    // إضافة حدث النقر على الفريق
                    teamCard.addEventListener('click', function() {
                        if (this.classList.contains('selected')) return;
                        
                        // إلغاء اختيار أي فريق آخر
                        document.querySelectorAll('.team-card').forEach(card => {
                            card.classList.remove('selected');
                        });
                        
                        // اختيار الفريق الحالي
                        this.classList.add('selected');
                        selectedTeamName = this.dataset.team;
                        
                        // تمكين زر التأكيد إذا تم إدخال اسم ورقم الهاتف
                        if (userNameInput.value.trim() && userPhoneInput.value.trim()) {
                            confirmButton.disabled = false;
                        }
                    });
                    
                    teamsContainer.appendChild(teamCard);
                });
            }
            
            // تحديث الإحصائيات
            function updateStats() {
                totalValue.textContent = teams.length;
                pickedValue.textContent = selectedTeams.length;
                availableValue.textContent = availableTeams.length;
            }
            
            // تحديث قائمة الاختيارات
            function updateSelectionsList() {
                selectionsTableBody.innerHTML = '';
                
                if (allSelections.length === 0) {
                    const row = document.createElement('tr');
                    row.innerHTML = `<td colspan="4" style="text-align: center;">لا توجد اختيارات حتى الآن</td>`;
                    selectionsTableBody.appendChild(row);
                    return;
                }
                
                allSelections.forEach(selection => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${selection.userName}</td>
                        <td>${selection.userPhone}</td>
                        <td>${selection.team}</td>
                        <td>${selection.time}</td>
                    `;
                    selectionsTableBody.appendChild(row);
                });
            }
            
            // تحديث واجهة المستخدم بعد الاختيار
            function updateUI(chosenTeam, userName, userPhone) {
                // تحديث البطاقات
                const teamCard = document.getElementById(`team-${chosenTeam.replace(/\s+/g, '-')}`);
                if (teamCard) {
                    teamCard.classList.add('selected');
                    
                    // إضافة اسم المختار
                    const selectorElement = document.createElement('div');
                    selectorElement.className = 'selector-name';
                    selectorElement.textContent = `اختاره: ${userName}`;
                    teamCard.appendChild(selectorElement);
                }
                
                // عرض النتيجة
                selectedTeam.textContent = chosenTeam;
                selectedBy.textContent = `تم الاختيار بواسطة: ${userName} (${userPhone})`;
                result.style.display = 'block';
                
                // تحديث الإحصائيات
                updateStats();
                
                // تعطيل زر التأكيد
                confirmButton.disabled = true;
                
                // إزالة اختيار الفريق
                selectedTeamName = null;
            }
            
            // إضافة اختيار إلى السجل
            function addSelectionToHistory(team, userName, userPhone) {
                const now = new Date();
                const timeString = now.toLocaleTimeString('ar-SA');
                
                allSelections.push({
                    userName: userName,
                    userPhone: userPhone,
                    team: team,
                    time: timeString
                });
                
                updateSelectionsList();
            }
            
            // إعادة تعيين النظام
            function resetSystem() {
                if (!confirm('هل أنت متأكد أنك تريد إعادة التعيين؟ سيتم حذف جميع البيانات الحالية.')) {
                    return;
                }
                
                availableTeams = [...teams];
                selectedTeams = [];
                allSelections = [];
                selectedTeamName = null;
                
                // إعادة تعيين واجهة المستخدم
                const allCards = document.querySelectorAll('.team-card');
                allCards.forEach(card => {
                    card.classList.remove('selected');
                    const selectorElement = card.querySelector('.selector-name');
                    if (selectorElement) {
                        selectorElement.remove();
                    }
                });
                
                selectedTeam.textContent = '-';
                selectedBy.textContent = '-';
                userNameInput.value = '';
                userPhoneInput.value = '';
                result.style.display = 'none';
                updateStats();
                updateSelectionsList();
                confirmButton.disabled = true;
            }
            
            // تصدير البيانات
            function exportData() {
                if (allSelections.length === 0) {
                    alert('لا توجد بيانات للتصدير');
                    return;
                }
                
                let csvContent = "اسم المشترك,رقم الهاتف,الفريق المختار,وقت الاختيار\n";
                
                allSelections.forEach(selection => {
                    csvContent += `"${selection.userName}","${selection.userPhone}","${selection.team}","${selection.time}"\n`;
                });
                
                const encodedUri = encodeURI("data:text/csv;charset=utf-8," + csvContent);
                const link = document.createElement("a");
                link.setAttribute("href", encodedUri);
                link.setAttribute("download", "اختيارات_الفرق.csv");
                document.body.appendChild(link);
                
                link.click();
                document.body.removeChild(link);
            }
            
            // إضافة مستمعي الأحداث
            confirmButton.addEventListener('click', function() {
                const userName = userNameInput.value.trim();
                const userPhone = userPhoneInput.value.trim();
                
                if (!userName) {
                    alert('يرجى إدخال اسم المشترك أولاً');
                    userNameInput.focus();
                    return;
                }
                
                if (!userPhone) {
                    alert('يرجى إدخال رقم الهاتف أولاً');
                    userPhoneInput.focus();
                    return;
                }
                
                if (!selectedTeamName) {
                    alert('يرجى اختيار فريق أولاً');
                    return;
                }
                
                // نقل الفريق من المتاح إلى المختار
                const index = availableTeams.indexOf(selectedTeamName);
                if (index !== -1) {
                    availableTeams.splice(index, 1);
                    selectedTeams.push(selectedTeamName);
                }
                
                updateUI(selectedTeamName, userName, userPhone);
                addSelectionToHistory(selectedTeamName, userName, userPhone);
            });
            
            // تمكين زر التأكيد فقط إذا تم إدخال اسم ورقم هاتف وتم اختيار فريق
            function updateConfirmButtonState() {
                confirmButton.disabled = !(userNameInput.value.trim() && userPhoneInput.value.trim() && selectedTeamName);
            }
            
            userNameInput.addEventListener('input', updateConfirmButtonState);
            userPhoneInput.addEventListener('input', updateConfirmButtonState);
            
            resetButton.addEventListener('click', resetSystem);
            exportButton.addEventListener('click', exportData);
            
            // تهيئة الواجهة
            displayTeams();
            updateStats();
            updateSelectionsList();
        });
    </script>
</body>
</html>
